{% extends ':App:layout.html.twig' %}

{% block body %}
    <div class="js-entretien-wrapper" id="entretiens">
        <a href="#" class="js-detail-entretien">Détail</a>
        <!-- Modal pour la visualisation du détail des entretiens -->
        <div class="modal fade" id="entretienModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="myModalLabel">Détail entretien</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Fin modal -->
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ asset('js/api/EntretienApp.js') }}"></script>
    <script>
        const $entretienWrapper = $('.js-entretien-wrapper');
        const entretienApp = new EntretienApp($entretienWrapper);

    </script>

    <script type="text/template" id="js-entretien-detail-template">
        <form class="js-new-entretien-form" novalidate data-url="{{ path('entretien_new') }}">
            <div id="appbundle_entretien">
                <div class="form-group">
                    <label class="control-label required" for="date">Date</label>
                    <input type="text" id="date" name="date" required="required" class="js-datepicker form-control" value="<%= date %>" />
                </div>
                <div class="form-group">
                    <label class="control-label required" for="young">Interviewee</label>
                    <input id="young" name="young" class="form-control js-select-user" value="<%= young %>" />
                </div>

                <div class="form-group">
                    <label class="control-label required" for="guests">Invités</label>
                    <input id="guests" name="guests" class="form-control" value="<%= guests %>" />
                </div>

                <% _.each(guests, function(guest){ %>
                <span class="badge badge-default"><%= guest %></span>
                <span class="js-delete-guest badge badge-danger">X</span>
                <% }); %>
                <div>
                    <ul class="js-display-guests">

                    </ul>
                </div>

                <div class="form-group">
                    <label class="control-label required" for="objet">Objet</label>
                    <input type="text" id="objet" name="objet" required="required" maxlength="255" class="form-control" value="<%= objet %>"/>
                </div>
                <div class="form-group">
                    <label class="control-label required" for="compteRendu">Compte rendu</label>
                    <textarea id="compteRendu" name="compteRendu" required="required" class="form-control"><%= compteRendu %></textarea>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Créer</button>
        </form>
    </script>
{% endblock %}